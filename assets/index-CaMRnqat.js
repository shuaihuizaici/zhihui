import{s as N,g as S}from"./order-w9RlPGIo.js";import"./index-DzeyjNAw.js";import{s as q}from"./index-mJJRiTeK.js";import"./request-CGeKHk3j.js";import"./index-BGiY52Zb.js";import{_ as b,s,p as a,D as e,N as l,F as g,E as k,V as p,Y as B,J as x,K as T,o as M,r as y,C as O,a as h,q as V,G as f,M as D,H as E}from"./index-Bo7BXbGR.js";/* empty css              *//* empty css              */import{N as F}from"./index-DrmGwNqa.js";import{_ as R}from"./empty-_cz67sAE.js";import{T as j,a as z}from"./index-0kYPOcbB.js";import"./use-route-Ty0eFOKu.js";import"./use-id-qDnz2Mlx.js";import"./index-DnYl1GG2.js";import"./use-refs-BOWF5-Oy.js";const G=t=>(x("data-v-c463249d"),t=t(),T(),t),H={key:0,class:"order-list-item"},J={class:"tit"},K={class:"time"},U={class:"status"},Y={class:"list"},A={class:"goods-img"},P=["src"],Q={class:"goods-content ellipsis-2"},W={class:"goods-trade"},X={class:"total"},Z={class:"actions"},tt={key:0},et={key:0},st={key:2},at={key:1},ot=G(()=>e("span",null,"评价",-1)),it=[ot],nt={__name:"OrderList",props:{item:{required:!0,type:Object}},emits:["success"],setup(t,{emit:u}){let r=u;function v(_){q({message:"确定要删除吗"}).then(async()=>{await N(_.order_id),r("success"),setTimeout(()=>{B("取消成功")},300)}).catch(()=>{})}return(_,d)=>{var c;return t.item.order_id?(s(),a("div",H,[e("div",J,[e("div",K,l(t.item.create_time),1),e("div",U,[e("span",null,l(t.item.state_text),1)])]),e("div",Y,[(s(!0),a(g,null,k(t.item.goods,(i,n)=>(s(),a("div",{class:"list-item",key:n},[e("div",A,[e("img",{src:i.goods_image,alt:""},null,8,P)]),e("div",Q,l(i.goods_name),1),e("div",W,[e("p",null,"¥ "+l(i.total_pay_price),1),e("p",null,"x "+l(i.total_num),1)])]))),128))]),e("div",X," 共 "+l((c=t.item.goods[0])==null?void 0:c.total_num)+" 件商品，总金额 ¥"+l(t.item.total_price),1),e("div",Z,[t.item.order_status===10?(s(),a("div",tt,[t.item.pay_status===10?(s(),a("span",et,"立刻付款")):t.item.delivery_status===10?(s(),a("span",{key:1,onClick:d[0]||(d[0]=i=>v(t.item))},"申请取消")):t.item.delivery_status===20||t.item.delivery_status===30?(s(),a("span",st,"确认收货")):p("",!0)])):p("",!0),t.item.order_status===30?(s(),a("div",at,it)):p("",!0)])])):p("",!0)}}},lt=b(nt,[["__scopeId","data-v-c463249d"]]),$=t=>(x("data-v-6fd40818"),t=t(),T(),t),rt={class:"order"},dt={key:0},ct={key:1,class:"zan"},mt=$(()=>e("img",{src:R,alt:""},null,-1)),_t=$(()=>e("span",null,"亲，暂无订单记录",-1)),ut=[mt,_t],pt={__name:"index",setup(t){let u=M(),r=y(u.query.dataType||"all");const v=[{name:"all",label:"全部订单"},{name:"payment",label:"待付款"},{name:"delivery",label:"待发货"},{name:"received",label:"待收货"},{name:"comment",label:"待评价"}];let _=y({page:1,dataType:u.query.dataType||"all"}),d=y([]);async function c(){let n=await S(_.value);d.value=n.data.list.data}function i(n){_.value.dataType=n.name,c()}return O(()=>{c()}),(n,m)=>{const w=F,C=z,I=j,L=lt;return s(),a("div",rt,[h(w,{title:"我的订单",fixed:"","left-arrow":"",onClickLeft:m[0]||(m[0]=o=>n.$router.back())}),h(I,{onClickTab:i,active:f(r),"onUpdate:active":m[1]||(m[1]=o=>D(r)?r.value=o:r=o),style:{"margin-top":"47px"}},{default:V(()=>[(s(),a(g,null,k(v,o=>h(C,{name:o.name,key:o,title:o.label},null,8,["name","title"])),64))]),_:1},8,["active"]),f(d).length!==0?(s(),a("div",dt,[(s(!0),a(g,null,k(f(d),o=>(s(),E(L,{key:o.order_id,item:o,onSuccess:m[2]||(m[2]=vt=>c())},null,8,["item"]))),128))])):(s(),a("div",ct,ut))])}}},qt=b(pt,[["__scopeId","data-v-6fd40818"]]);export{qt as default};
