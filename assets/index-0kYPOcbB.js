import{aH as de,aI as J,aJ as ue,aK as Oe,an as He,aL as Le,aM as Ne,aN as fe,c as M,n as z,$ as ve,m as H,d as Z,r as I,aO as he,ai as be,i as R,au as me,e as ge,g as Ee,O as $,at as ye,aP as Q,a6 as A,aQ as L,aR as we,aS as We,a as m,w as p,ae as Y,C as De,P as ee,t as D,u as Me,aT as Ze,aU as Ue,y as ie,a5 as G,B as Ve,aB as Fe,aV as oe,b as je,j as Ke,ac as Xe,h as Ye,as as qe,aD as Je,T as Qe,U as Ge,L as pe,aW as et,aX as tt,aY as nt,k as at,R as re,f as lt}from"./index-Bo7BXbGR.js";import{u as xe}from"./use-id-qDnz2Mlx.js";import{a as it,r as ot}from"./use-route-Ty0eFOKu.js";import{S as rt,a as st}from"./index-DnYl1GG2.js";import{u as ct}from"./use-refs-BOWF5-Oy.js";function dt(e,l,i){let r,d=0;const t=e.scrollLeft,o=i===0?1:Math.round(i*1e3/16);function s(){de(r)}function v(){e.scrollLeft+=(l-t)/o,++d<o&&(r=J(v))}return v(),s}function ut(e,l,i,r){let d,t=ue(e);const o=t<l,s=i===0?1:Math.round(i*1e3/16),v=(l-t)/s;function g(){de(d)}function w(){t+=v,(o&&t>l||!o&&t<l)&&(t=l),Oe(e,t),o&&t<l||!o&&t>l?d=J(w):r&&(d=J(r))}return w(),g}function Te(e,l){if(!He||!window.IntersectionObserver)return;const i=new IntersectionObserver(t=>{l(t[0].intersectionRatio>0)},{root:document.body}),r=()=>{e.value&&i.observe(e.value)},d=()=>{e.value&&i.unobserve(e.value)};Le(d),Ne(d),fe(r)}const[ft,vt]=M("sticky"),ht={zIndex:z,position:ve("top"),container:Object,offsetTop:H(0),offsetBottom:H(0)};var bt=Z({name:ft,props:ht,emits:["scroll","change"],setup(e,{emit:l,slots:i}){const r=I(),d=he(r),t=be({fixed:!1,width:0,height:0,transform:0}),o=I(!1),s=R(()=>me(e.position==="top"?e.offsetTop:e.offsetBottom)),v=R(()=>{if(o.value)return;const{fixed:f,height:S,width:u}=t;if(f)return{width:`${u}px`,height:`${S}px`}}),g=R(()=>{if(!t.fixed||o.value)return;const f=ge(Ee(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${s.value}px`});return t.transform&&(f.transform=`translate3d(0, ${t.transform}px, 0)`),f}),w=f=>l("scroll",{scrollTop:f,isFixed:t.fixed}),k=()=>{if(!r.value||Q(r))return;const{container:f,position:S}=e,u=L(r),T=ue(window);if(t.width=u.width,t.height=u.height,S==="top")if(f){const c=L(f),B=c.bottom-s.value-t.height;t.fixed=s.value>u.top&&c.bottom>0,t.transform=B<0?B:0}else t.fixed=s.value>u.top;else{const{clientHeight:c}=document.documentElement;if(f){const B=L(f),b=c-B.top-s.value-t.height;t.fixed=c-s.value<u.bottom&&c>B.top,t.transform=b<0?-b:0}else t.fixed=c-s.value<u.bottom}w(T)};return $(()=>t.fixed,f=>l("change",f)),ye("scroll",k,{target:d,passive:!0}),Te(r,k),$([we,We],()=>{!r.value||Q(r)||!t.fixed||(o.value=!0,A(()=>{const f=L(r);t.width=f.width,t.height=f.height,o.value=!1}))}),()=>{var f;return m("div",{ref:r,style:v.value},[m("div",{class:vt({fixed:t.fixed&&!o.value}),style:g.value},[(f=i.default)==null?void 0:f.call(i)])])}}});const mt=p(bt),[gt,se]=M("tabs");var yt=Z({name:gt,props:{count:Y(Number),inited:Boolean,animated:Boolean,duration:Y(z),swipeable:Boolean,lazyRender:Boolean,currentIndex:Y(Number)},emits:["change"],setup(e,{emit:l,slots:i}){const r=I(),d=s=>l("change",s),t=()=>{var s;const v=(s=i.default)==null?void 0:s.call(i);return e.animated||e.swipeable?m(rt,{ref:r,loop:!1,class:se("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:d},{default:()=>[v]}):v},o=s=>{const v=r.value;v&&v.state.active!==s&&v.swipeTo(s,{immediate:!e.inited})};return $(()=>e.currentIndex,o),De(()=>{o(e.currentIndex)}),ee({swipeRef:r}),()=>m("div",{class:se("content",{animated:e.animated||e.swipeable})},[t()])}});const[Se,X]=M("tabs"),wt={type:ve("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:H(0),duration:H(.3),animated:Boolean,ellipsis:D,swipeable:Boolean,scrollspy:Boolean,offsetTop:H(0),background:String,lazyRender:D,showHeader:D,lineWidth:z,lineHeight:z,beforeChange:Function,swipeThreshold:H(5),titleActiveColor:String,titleInactiveColor:String},Ce=Symbol(Se);var xt=Z({name:Se,props:wt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:l,slots:i}){let r,d,t,o,s;const v=I(),g=I(),w=I(),k=I(),f=xe(),S=he(v),[u,T]=ct(),{children:c,linkChildren:B}=Me(Ce),b=be({inited:!1,position:"",lineStyle:{},currentIndex:-1}),N=R(()=>c.length>+e.swipeThreshold||!e.ellipsis||e.shrink),U=R(()=>({borderColor:e.color,background:e.background})),E=(n,a)=>{var h;return(h=n.name)!=null?h:a},V=R(()=>{const n=c[b.currentIndex];if(n)return E(n,b.currentIndex)}),O=R(()=>me(e.offsetTop)),te=R(()=>e.sticky?O.value+r:0),W=n=>{const a=g.value,h=u.value;if(!N.value||!a||!h||!h[b.currentIndex])return;const x=h[b.currentIndex].$el,y=x.offsetLeft-(a.offsetWidth-x.offsetWidth)/2;o&&o(),o=dt(a,y,n?0:+e.duration)},_=()=>{const n=b.inited;A(()=>{const a=u.value;if(!a||!a[b.currentIndex]||e.type!=="line"||Q(v.value))return;const h=a[b.currentIndex].$el,{lineWidth:x,lineHeight:y}=e,C=h.offsetLeft+h.offsetWidth/2,P={width:ie(x),backgroundColor:e.color,transform:`translateX(${C}px) translateX(-50%)`};if(n&&(P.transitionDuration=`${e.duration}s`),G(y)){const K=ie(y);P.height=K,P.borderRadius=K}b.lineStyle=P})},Ie=n=>{const a=n<b.currentIndex?-1:1;for(;n>=0&&n<c.length;){if(!c[n].disabled)return n;n+=a}},F=(n,a)=>{const h=Ie(n);if(!G(h))return;const x=c[h],y=E(x,h),C=b.currentIndex!==null;b.currentIndex!==h&&(b.currentIndex=h,a||W(),_()),y!==e.active&&(l("update:active",y),C&&l("change",y,x.title)),t&&!e.scrollspy&&Fe(Math.ceil(oe(v.value)-O.value))},j=(n,a)=>{const h=c.find((y,C)=>E(y,C)===n),x=h?c.indexOf(h):0;F(x,a)},ne=(n=!1)=>{if(e.scrollspy){const a=c[b.currentIndex].$el;if(a&&S.value){const h=oe(a,S.value)-te.value;d=!0,s&&s(),s=ut(S.value,h,n?0:+e.duration,()=>{d=!1})}}},Re=(n,a,h)=>{const{title:x,disabled:y}=c[a],C=E(c[a],a);y||(je(e.beforeChange,{args:[C],done:()=>{F(a),ne()}}),it(n)),l("clickTab",{name:C,title:x,event:h,disabled:y})},ke=n=>{t=n.isFixed,l("scroll",n)},Be=n=>{A(()=>{j(n),ne(!0)})},$e=()=>{for(let n=0;n<c.length;n++){const{top:a}=L(c[n].$el);if(a>te.value)return n===0?0:n-1}return c.length-1},_e=()=>{if(e.scrollspy&&!d){const n=$e();F(n)}},Pe=()=>{if(e.type==="line"&&c.length)return m("div",{class:X("line"),style:b.lineStyle},null)},ae=()=>{var n,a,h;const{type:x,border:y,sticky:C}=e,P=[m("div",{ref:C?void 0:w,class:[X("wrap"),{[Ve]:x==="line"&&y}]},[m("div",{ref:g,role:"tablist",class:X("nav",[x,{shrink:e.shrink,complete:N.value}]),style:U.value,"aria-orientation":"horizontal"},[(n=i["nav-left"])==null?void 0:n.call(i),c.map(K=>K.renderTitle(Re)),Pe(),(a=i["nav-right"])==null?void 0:a.call(i)])]),(h=i["nav-bottom"])==null?void 0:h.call(i)];return C?m("div",{ref:w},[P]):P},le=()=>{_(),A(()=>{var n,a;W(!0),(a=(n=k.value)==null?void 0:n.swipeRef.value)==null||a.resize()})};$(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],_),$(we,le),$(()=>e.active,n=>{n!==V.value&&j(n)}),$(()=>c.length,()=>{b.inited&&(j(e.active),_(),A(()=>{W(!0)}))});const Ae=()=>{j(e.active,!0),A(()=>{b.inited=!0,w.value&&(r=L(w.value).height),W(!0)})},ze=(n,a)=>l("rendered",n,a);return ee({resize:le,scrollTo:Be}),Ze(_),Ue(_),fe(Ae),Te(v,_),ye("scroll",_e,{target:S,passive:!0}),B({id:f,props:e,setLine:_,scrollable:N,onRendered:ze,currentName:V,setTitleRefs:T,scrollIntoView:W}),()=>m("div",{ref:v,class:X([e.type])},[e.showHeader?e.sticky?m(mt,{container:v.value,offsetTop:O.value,onScroll:ke},{default:()=>[ae()]}):ae():null,m(yt,{ref:k,count:c.length,inited:b.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:b.currentIndex,onChange:F},{default:()=>{var n;return[(n=i.default)==null?void 0:n.call(i)]}})])}});const Tt=Symbol(),[St,ce]=M("tab"),Ct=Z({name:St,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:z,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:D},setup(e,{slots:l}){const i=R(()=>{const d={},{type:t,color:o,disabled:s,isActive:v,activeColor:g,inactiveColor:w}=e;o&&t==="card"&&(d.borderColor=o,s||(v?d.backgroundColor=o:d.color=o));const f=v?g:w;return f&&(d.color=f),d}),r=()=>{const d=m("span",{class:ce("text",{ellipsis:!e.scrollable})},[l.title?l.title():e.title]);return e.dot||G(e.badge)&&e.badge!==""?m(Ke,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[d]}):d};return()=>m("div",{id:e.id,role:"tab",class:[ce([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[r()])}}),[It,q]=M("tab"),Rt=ge({},ot,{dot:Boolean,name:z,badge:z,title:String,disabled:Boolean,titleClass:Xe,titleStyle:[String,Object],showZeroBadge:D});var kt=Z({name:It,props:Rt,setup(e,{slots:l}){const i=xe(),r=I(!1),d=lt(),{parent:t,index:o}=Ye(Ce);if(!t)return;const s=()=>{var u;return(u=e.name)!=null?u:o.value},v=()=>{r.value=!0,t.props.lazyRender&&A(()=>{t.onRendered(s(),e.title)})},g=R(()=>{const u=s()===t.currentName.value;return u&&!r.value&&v(),u}),w=I(""),k=I("");qe(()=>{const{titleClass:u,titleStyle:T}=e;w.value=u?pe(u):"",k.value=T&&typeof T!="string"?et(tt(T)):T});const f=u=>m(Ct,at({key:i,id:`${t.id}-${o.value}`,ref:t.setTitleRefs(o.value),style:k.value,class:w.value,isActive:g.value,controls:i,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:T=>u(d.proxy,o.value,T)},re(t.props,["type","color","shrink"]),re(e,["dot","badge","title","disabled","showZeroBadge"])),{title:l.title}),S=I(!g.value);return $(g,u=>{u?S.value=!1:nt(()=>{S.value=!0})}),$(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),Je(Tt,g),ee({id:i,renderTitle:f}),()=>{var u;const T=`${t.id}-${o.value}`,{animated:c,swipeable:B,scrollspy:b,lazyRender:N}=t.props;if(!l.default&&!c)return;const U=b||g.value;if(c||B)return m(st,{id:i,role:"tabpanel",class:q("panel-wrapper",{inactive:S.value}),tabindex:g.value?0:-1,"aria-hidden":!g.value,"aria-labelledby":T},{default:()=>{var O;return[m("div",{class:q("panel")},[(O=l.default)==null?void 0:O.call(l)])]}});const V=r.value||b||!N?(u=l.default)==null?void 0:u.call(l):null;return Qe(m("div",{id:i,role:"tabpanel",class:q("panel"),tabindex:U?0:-1,"aria-labelledby":T},[V]),[[Ge,U]])}}});const zt=p(kt),Ot=p(xt);export{Ot as T,zt as a};
