import"./index-DzeyjNAw.js";import{i as S}from"./request-CGeKHk3j.js";import{B as V}from"./index-BGiY52Zb.js";import"./index-D_HlEWVc.js";import{F as h}from"./index-C873kxIO.js";import{N as x}from"./index-DrmGwNqa.js";import{c as I,d as N,a,F as T,t as F,k as P,ab as D,B as G,w as O,_ as R,S as q,W as U,r as m,p as E,q as p,s as L,G as c,M as v,D as d,N as M,v as $,J as A,K as J,Y as K}from"./index-Bo7BXbGR.js";import{F as W}from"./index-B9mw1W8G.js";import"./use-route-Ty0eFOKu.js";import"./use-id-qDnz2Mlx.js";const[Y,b]=I("cell-group"),j={title:String,inset:Boolean,border:F};var z=N({name:Y,inheritAttrs:!1,props:j,setup(e,{slots:t,attrs:_}){const s=()=>{var r;return a("div",P({class:[b({inset:e.inset}),{[G]:e.border&&!e.inset}]},_,D()),[(r=t.default)==null?void 0:r.call(t)])},o=()=>a("div",{class:b("title",{inset:e.inset})},[t.title?t.title():e.title]);return()=>e.title||t.title?a(T,null,[o(),s()]):s()}});const H=O(z),Q=(e,t)=>S.post("/passport/login",{form:{isParty:!1,partyData:{},mobile:e,smsCode:t}}),X=e=>(A("data-v-9830183b"),e=e(),J(),e),Z={class:"login"},ee=X(()=>d("div",{class:"title"},[d("p",null,"手机号登录"),d("span",null,"未注册的手机号登录后将自动注册")],-1)),te={style:{margin:"16px"}},ae={__name:"index",setup(e){let t=q(),_=U(),s=m(),o=m(0),r=m(""),i=m("");async function g(){if(o.value>0)return;await s.value.validate("mobile"),K("测试环境下验证码为246810"),o.value=60;let u=setInterval(()=>{o.value--,o.value<=0&&clearInterval(u)},1e3)}async function k(){await s.value.validate();let u=await Q(r.value,i.value);_.setToken(u.data),t.push("/sy")}return(u,l)=>{const y=x,f=h,B=H,w=V,C=W;return L(),E("div",Z,[a(y,{title:"登录",fixed:"","left-arrow":"",onClickLeft:l[0]||(l[0]=n=>u.$router.back())}),ee,a(C,{ref_key:"form",ref:s},{default:p(()=>[a(B,{inset:""},{default:p(()=>[a(f,{modelValue:c(r),"onUpdate:modelValue":l[1]||(l[1]=n=>v(r)?r.value=n:r=n),name:"mobile",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确"}]},null,8,["modelValue"]),a(f,{modelValue:c(i),"onUpdate:modelValue":l[2]||(l[2]=n=>v(i)?i.value=n:i=n),name:"smsCode",label:"验证码",placeholder:"验证码",rules:[{required:!0,message:"请填写验证码"},{pattern:/^\d{6}$/,message:"验证码格式不正确"}]},{button:p(()=>[d("span",{onClick:g},M(c(o)===0?"获取验证码":c(o)),1)]),_:1},8,["modelValue"])]),_:1}),d("div",te,[a(w,{round:"",block:"",type:"primary",onClick:k},{default:p(()=>[$(" 登录 ")]),_:1})])]),_:1},512)])}}},ce=R(ae,[["__scopeId","data-v-9830183b"]]);export{ce as default};
