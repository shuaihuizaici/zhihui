import"./index-DzeyjNAw.js";import"./index-D_HlEWVc.js";import"./index-C873kxIO.js";import"./request-CGeKHk3j.js";import{A as w,a as L}from"./index.esm-CeFT-Usn.js";import"./index-BGiY52Zb.js";/* empty css              *//* empty css              */import{N as A}from"./index-DrmGwNqa.js";import{o as D,S as j,r as v,C as k,p as x,a as f,G as i,Y as g,s as z}from"./index-Bo7BXbGR.js";import{d as B,b as C,e as N,f as O}from"./address-BX750gIF.js";import{s as S}from"./index-mJJRiTeK.js";import"./use-route-Ty0eFOKu.js";import"./use-id-qDnz2Mlx.js";import"./index-B9mw1W8G.js";const T={class:"bianjidizhi"},W={__name:"index",setup(E){let h=D(),p=j(),l=h.query.addressId,a=v({name:"",phone:"",detail:"",region:[]}),t=v({});async function _(){let e=await B(l);t.value=e.data.detail}async function b(e){a.value.region=[],a.value.name=e.name,a.value.phone=e.tel,a.value.detail=e.addressDetail;let n=await C(),o=Object.values(n.data.list).find(r=>e.province.substring(0,2)===r.name.substring(0,2));a.value.region.push({value:o.id,label:o.name});let s=Object.values(o.city).find(r=>e.city===r.name);a.value.region.push({value:s.id,label:s.name});let u=Object.values(s.region).find(r=>e.county===r.name);a.value.region.push({value:u.id,label:u.name}),await N(l,a.value),g("编辑成功"),setTimeout(()=>{p.replace("/dizhi")},300)}function y(){S({message:"确定要删除吗"}).then(async()=>{await O(l),g("删除成功"),setTimeout(()=>p.replace("/dizhi"),300)}).catch(()=>{})}return k(()=>{_()}),(e,n)=>{var d,s,m;const c=A,o=w;return z(),x("div",T,[f(c,{title:"编辑收货地址",fixed:"","left-arrow":"",onClickLeft:n[0]||(n[0]=u=>e.$router.back())}),f(o,{style:{"margin-top":"47px"},"show-delete":"","area-list":i(L),"area-columns-placeholder":["请选择","请选择","请选择"],onSave:b,onDelete:y,"address-info":{name:i(t).name,tel:i(t).phone,addressDetail:i(t).detail,province:(d=i(t).region)==null?void 0:d.province,city:(s=i(t).region)==null?void 0:s.city,county:(m=i(t).region)==null?void 0:m.region}},null,8,["area-list","address-info"])])}}};export{W as default};
