import{Z as m,r as h,i as r}from"./index-Bo7BXbGR.js";import{i as c}from"./request-CGeKHk3j.js";const E=(t,s,o)=>c.post("/cart/add",{goodsId:t,goodsNum:s,goodsSkuId:o}),_=()=>c.get("/cart/list"),y=(t,s,o)=>c.post("/cart/update",{goodsId:t,goodsNum:s,goodsSkuId:o}),C=t=>c.post("/cart/clear",{cartIds:t}),L=m("cart",()=>{let t=h([]);async function s(){let e=await _();t.value=e.data.list,t.value.forEach(a=>{a.isSelected=!1})}s();async function o(){let e=n.value.map(a=>a.id);await C(e),s()}async function l(e,a,p){let S=t.value.find(v=>v.goods_id===e);S.goods_num=a;let w=await y(e,a,p)}function u(e){e.isSelected=!e.isSelected}let i=r(()=>t.value.every(e=>e.isSelected));function d(e){t.value.forEach(a=>{a.isSelected=e})}let n=r(()=>t.value.filter(e=>e.isSelected)),g=r(()=>n.value.reduce((e,a)=>e+a.goods_num,0)),f=r(()=>n.value.reduce((e,a)=>e+a.goods_num*a.goods.goods_price_min,0));return{list:t,getList:s,gaiShu:l,xuan:u,quan:d,jue:i,shuliang:g,qian:f,xuanzhong:n,shan:o}});export{E as a,L as u};
