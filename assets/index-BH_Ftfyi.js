import"./index-DzeyjNAw.js";import"./request-CGeKHk3j.js";import{B as ns}from"./index-BGiY52Zb.js";import{S as as}from"./index-DGkifMhh.js";import{R as is}from"./index-CZMBPqEK.js";/* empty css              */import{N as ls}from"./index-DrmGwNqa.js";import{a as ds,b as rs,c as cs}from"./product-BgeLzxtt.js";import{S as G,_ as us,W as _s,o as ps,r as d,C as ms,p as g,a as i,q as _,D as s,N as a,G as e,M as b,v as p,F as I,E as $,a1 as vs,s as c,H as L,J as fs,K as hs,I as gs,Y as ks}from"./index-Bo7BXbGR.js";import{s as ws}from"./index-mJJRiTeK.js";import{d as xs}from"./default-avatar-DKDXgyxI.js";import{u as Cs,a as ys}from"./cart-AW91Fwhi.js";import{S as bs,a as Ss}from"./index-DnYl1GG2.js";import"./use-route-Ty0eFOKu.js";import"./use-refs-BOWF5-Oy.js";let Is=()=>{let m=G();function w(){ws({message:"此时此刻需要您登录喔~"}).then(()=>{m.push("/login")}).catch(()=>{})}return{fn:w}};const k=m=>(fs("data-v-981db9fe"),m=m(),hs(),m),$s={class:"prodetail"},Ls=["src"],Ns={class:"custom-indicator"},Bs={class:"info"},Fs={class:"title"},Vs={class:"price"},Ds={class:"now"},Rs={class:"oldprice"},Ts={class:"sellcount"},Ms={class:"msg ellipsis-2"},Us={class:"left-words"},zs={class:"right-icon"},Hs=k(()=>s("div",{class:"ding"},"服务",-1)),Ps={class:"xian"},qs={class:"xiao"},Es={class:"comment"},js={class:"comment-title"},Gs={class:"left"},Js={class:"comment-list"},Ks={class:"top"},Ws=["src"],Ys={class:"name"},As={class:"content ellipsis"},Os={class:"time"},Qs=["innerHTML"],Xs={class:"footer"},Zs=k(()=>s("span",null,"首页",-1)),st=k(()=>s("span",null,"购物车",-1)),tt={class:"content"},ot={class:"top"},et=["src"],nt={class:"right"},at=k(()=>s("span",null,"￥",-1)),it={class:"center"},lt=k(()=>s("span",null,"数量",-1)),dt={class:"bottom"},rt={__name:"index",setup(m){let w=Is(),N=_s(),J=Cs(),K=ps(),W=G(),v=K.params.id,l=d({}),x=d([]);async function Y(){const n=await ds(v);l.value=n.data.detail,x.value=n.data.detail.goods_images}let B=d([]),F=d(0);async function A(){const{data:{list:n,total:o}}=await rs(v,3);B.value=n,F.value=o}let V=d(0);function O(n){V.value=n}let C=d([]);async function Q(){let n=await cs(v);C.value=n.data.list}let r=d(!1),f=d(!1),h=d(1),D=d(1);function R(n){D.value=n,f.value=!0}function X(){var n;if((n=N.userInfo)!=null&&n.token){async function o(){var y;await ys(v,h.value,(y=l.value)==null?void 0:y.skuList[0].goods_sku_id),J.getList(),setTimeout(()=>{ks("加入成功")},500)}o(),f.value=!1}else w.fn()}function Z(){var n;(n=N.userInfo)!=null&&n.token?W.push({path:"/zhifu",query:{mode:"buyNow",goodsId:v,goodsSkuId:l.value.skuList[0].goods_sku_id,goodsNum:h.value}}):w.fn()}return ms(()=>{Y(),A(),Q()}),(n,o)=>{var U,z,H,P,q,E,j;const y=ls,ss=Ss,ts=bs,u=gs,T=vs,os=is,es=as,M=ns;return c(),g("div",$s,[i(y,{fixed:"",title:"商品详情页","left-arrow":"",onClickLeft:o[0]||(o[0]=t=>n.$router.go(-1))}),i(ts,{autoplay:4e3,onChange:O},{indicator:_(()=>{var t;return[s("div",Ns,a(e(V)+1)+" / "+a((t=e(x))==null?void 0:t.length),1)]}),default:_(()=>[(c(!0),g(I,null,$(e(x),(t,S)=>(c(),L(ss,{key:t.external_url},{default:_(()=>[s("img",{src:t.external_url},null,8,Ls)]),_:2},1024))),128))]),_:1}),s("div",Bs,[s("div",Fs,[s("div",Vs,[s("span",Ds,"￥"+a((U=e(l))==null?void 0:U.goods_price_min),1),s("span",Rs,"￥"+a((z=e(l))==null?void 0:z.goods_price_max),1)]),s("div",Ts,"已售 "+a((H=e(l))==null?void 0:H.goods_sales)+" 件",1)]),s("div",Ms,a((P=e(l))==null?void 0:P.goods_name),1),s("div",{class:"service",onClick:o[1]||(o[1]=t=>b(r)?r.value=!e(r):r=!e(r))},[s("div",Us,[s("span",null,[i(u,{name:"passed"}),p(a((q=e(C)[0])==null?void 0:q.name),1)]),s("span",null,[i(u,{name:"passed"}),p(a((E=e(C)[1])==null?void 0:E.name),1)])]),s("div",zs,[i(u,{name:"arrow"})])]),i(T,{show:e(r),"onUpdate:show":o[2]||(o[2]=t=>b(r)?r.value=t:r=t),round:"",closeable:"",position:"bottom",style:{height:"367px",padding:"60px 10px"}},{default:_(()=>[Hs,s("div",Ps,[(c(!0),g(I,null,$(e(C),t=>(c(),g("div",{class:"item",key:t},[s("p",null,a(t.name),1),s("p",null,[p(a(t.summary)+" ",1),s("div",qs,[i(u,{name:"passed"})])])]))),128))])]),_:1},8,["show"])]),s("div",Es,[s("div",js,[s("div",Gs,"商品评价 ("+a(e(F))+"条)",1),s("div",{class:"right",onClick:o[3]||(o[3]=t=>n.$router.push(`/chakan/${e(v)}`))},[p("查看更多 "),i(u,{name:"arrow"})])]),s("div",Js,[(c(!0),g(I,null,$(e(B),t=>(c(),g("div",{class:"comment-item",key:t.comment_id},[s("div",Ks,[s("img",{src:t.user.avatar_url||e(xs),alt:""},null,8,Ws),s("div",Ys,a(t.user.nick_name),1),i(os,{size:16,"model-value":t.score/2,color:"#ffd21e","void-icon":"star","void-color":"#eee"},null,8,["model-value"])]),s("div",As,a(t.content),1),s("div",Os,a(t.create_time),1)]))),128))])]),s("div",{class:"desc",innerHTML:(j=e(l))==null?void 0:j.content},null,8,Qs),s("div",Xs,[s("div",{onClick:o[4]||(o[4]=t=>n.$router.push("/")),class:"icon-home"},[i(u,{name:"wap-home-o"}),Zs]),s("div",{onClick:o[5]||(o[5]=t=>n.$router.push("/gouwuche")),class:"icon-cart"},[i(u,{name:"shopping-cart-o"}),st]),s("div",{onClick:o[6]||(o[6]=t=>R(1)),class:"btn-add"},"加入购物车"),s("div",{onClick:o[7]||(o[7]=t=>R(2)),class:"btn-buy"},"立刻购买")]),i(T,{show:e(f),"onUpdate:show":o[9]||(o[9]=t=>b(f)?f.value=t:f=t),round:"",closeable:"",position:"bottom",style:{padding:"40px 20px"}},{default:_(()=>{var t;return[s("div",tt,[s("div",ot,[s("img",{src:e(x)[0].external_url,alt:""},null,8,et),s("div",nt,[s("p",null,[at,s("span",null,a((t=e(l))==null?void 0:t.goods_price_min),1)]),s("p",null,"库存："+a(e(l).stock_total),1)])]),s("div",it,[lt,p(),i(es,{modelValue:e(h),"onUpdate:modelValue":o[8]||(o[8]=S=>b(h)?h.value=S:h=S),min:1,max:"10","input-width":"38px","button-size":"40px"},null,8,["modelValue"])]),s("div",dt,[e(D)===1?(c(),L(M,{key:0,class:"gou",onClick:X},{default:_(()=>[p(" 加入购物车 ")]),_:1})):(c(),L(M,{key:1,class:"mai",onClick:Z},{default:_(()=>[p(" 立刻购买 ")]),_:1}))])])]}),_:1},8,["show"])])}}},St=us(rt,[["__scopeId","data-v-981db9fe"]]);export{St as default};
